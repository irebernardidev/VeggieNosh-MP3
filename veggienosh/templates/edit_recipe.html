{% extends 'base.html' %}
{% block content %}
<div class="container margin-top-large container-addrecipe z-depth-2">
    <h1 class="uppercase center-align secondary-heading">Spruce Up Your Salad!</h1>
    <!-- Form for editing a recipe -->
    <form class="add-edit-form" autocomplete="off" method="POST" action="{{ url_for('update_recipe', recipe_id=selected_recipe._id) }}">
        <div class="row">
            <!-- Field for recipe name input -->
            <div class="input-field col s12">
                <i class="far fa-file-alt prefix"></i>
                <input id="recipe_name" name="recipe_name" value="{{ selected_recipe.recipe_name }}" 
                    type="text" minlength="4" maxlength="25"
                    class="validate" required />
                <label for="recipe_name">Dish Designation 
                    <i class="fas fa-question-circle tooltipped" data-position="top" data-tooltip="Give your dish a catchy name! 4-25 characters"></i> 
                    <i class="fas fa-asterisk asterisk"></i>
                </label>
            </div>
            <!-- Field for recipe description input -->
            <div class="input-field col s12">
                <i class="fas fa-pen prefix"></i>
                <textarea
                    id="recipe_description"
                    name="recipe_description"
                    class="validate materialize-textarea"
                    minlength="20"
                    maxlength="300" 
                    required
                >{{ selected_recipe.description }}
                </textarea>
                <label for="recipe_description">Leafy Lines  
                    <i class="fas fa-question-circle tooltipped" data-position="top" data-tooltip="Describe your dish in veggie verse! 20-300 characters"></i> 
                    <i class="fas fa-asterisk asterisk"></i>
                </label>
            </div>
            <!-- Dropdown for selecting recipe category -->
            <div class="input-field col s12 m6 l4">
                <i class="fas fa-globe-europe prefix"></i>
                <select id="category_type" name="category_type">
                    <option value="None" selected>Choose Your Veggie Variety</option>
                    {% for category in category_types %}
                    {% if category.category_type == selected_recipe.category_type %}
                        <option value="{{category.category_type}}" selected>{{category.category_type}}</option>
                    {% else %}
                        <option value="{{category.category_type}}">{{category.category_type}}</option>
                    {% endif %}
                    {% endfor %}
                </select>
                <label for="category_type">Garden Category (optional)</label>
            </div>
            <!-- Dropdown for selecting dish type -->
            <div class="input-field col s12 m6 l4">
                <i class="fas fa-utensils prefix"></i>
                <select id="dish_type" name="dish_type">
                    <option value="" disabled selected>Pick a Plate Type</option>
                    {% for dish in dish_types %}
                    {% if dish.dish_type == selected_recipe.dish_type %}
                        <option value="{{dish.dish_type}}" selected>{{dish.dish_type}}</option>
                    {% else %}
                        <option value="{{dish.dish_type}}">{{dish.dish_type}}</option>
                    {% endif %}
                    {% endfor %}
                </select>
                <label for="dish_type">Dish Diversity <i class="fas fa-asterisk asterisk"></i></label>
            </div>
            <!-- Field for diet type selection -->
            <div class="input-field col s12 m6 l4">
                <i class="fas fa-leaf prefix"></i>
                <select id="diet_type" name="diet_type">
                    <option value="None" selected>Pick Your Plant-based Preference</option>
                    {% for diet in diet_types %}
                    {% if diet.diet_type == selected_recipe.diet_type %}
                        <option value="{{diet.diet_type}}" selected>{{diet.diet_type}}</option>
                    {% else %}
                        <option value="{{diet.diet_type}}">{{diet.diet_type}}</option>
                    {% endif %}
                    {% endfor %}
                </select>
                 <label for="diet_type">Diet Delight (optional)</label>
            </div>
             <!-- Field for cooking time input -->
            <div class="input-field col s12 m6">
                <i class="far fa-clock prefix"></i>
                <input id="cooking_time" name="cooking_time" value="{{ selected_recipe.cooking_time }}" type="number" class="validate" required />
                <label for="cooking_time">Time Till Tasty (min)  <i class="fas fa-asterisk asterisk"></i></label>
            </div>
             <!-- Field for servings input -->
            <div class="input-field col s12 m6">
                <i class="fas fa-concierge-bell prefix"></i>
                <input id="servings" name="servings" value="{{ selected_recipe.servings }}" type="number" class="validate" required />
                <label for="servings">Portions for the Pack  <i class="fas fa-asterisk asterisk"></i></label>
            </div>
        </div>

        <div class="row">
            <!-- Textarea for ingredients list -->
            <div class="input-field col s12">
            <i class="fas fa-clipboard-list prefix"></i>
            <textarea
                id="ingredients"
                name="ingredients"
                placeholder="List each ingredient in your garden grub on a new line"
                class="validate materialize-textarea"
                required
            >{%- for ingredient in selected_recipe.ingredients -%}
            {{ ingredient + "\n" }} 
            {%- endfor -%}</textarea>
            <label for="ingredients">Ingredient Inventory (each on a new line) 
            <i class="fas fa-asterisk asterisk"></i></label>
            </div>
            <!-- Textarea for directions list -->
            <div class="input-field col s12">
                <i class="fas fa-list-ol prefix"></i>
                <textarea
                    id="directions"
                    name="directions"
                    placeholder="Sketch each step of your veggie voyage on a new line"
                    class="validate materialize-textarea"
                    required
                >{%- for direction in selected_recipe.directions -%}
                {{ direction + "\n" }} 
                {%- endfor -%}</textarea>
                <label for="directions">Step-by-Step (each on a new line) 
                    <i class="fas fa-asterisk asterisk"></i>
                </label>
            </div>
            <!-- Field for recipe image URL -->
            <div class="input-field col s12">
                <i class="far fa-images prefix"></i>
                <input
                    id="recipe_image"
                    name="recipe_image"
                    value="{{ selected_recipe.image}}"
                    placeholder="Got a snap of your snap peas? Enter the URL here!"
                    type="url"
                    class="validate"
                />
                <label for="recipe_image">Recipe Snapshot URL (optional)</label>
            </div>
        </div>
        <div class="row">
            <!-- Save Button -->
            <div class="col s12">
                <button class="btn-large waves-effect waves-light btn-green right" type="submit" name="action">Save Edits
                    <i class="fas fa-save"></i>
                </button>
            </div>
        </div>
    </form>
</div>
{% endblock %}
