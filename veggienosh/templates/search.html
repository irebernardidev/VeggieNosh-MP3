{% extends 'base.html' %}

{% block content %}

<!-- Banner Image -->
<div class="search-img-container">
    <img src="{{ url_for('static', filename='images/search.jpg') }}" class="img-search" alt="Vegan Dish Picture">
    <div>
        <h1 class="search-img-title text-white">Discover Vegan Delights</h1>   
    </div>
</div>

<!-- Search Form -->
<div class="search-container">
    <form action="{{ url_for('search', query=query, current_page=current_page) }}" class="search-form">
        <input type="text" class="search-input" id="query" name="query" placeholder="Find vegan recipes...">
        <button class="search-button">
            <i class="fas fa-search search-icon"></i>
        </button>
    </form>
</div>

<!-- Search Results -->
<div class="search-results">
    <!-- Search Results Count -->
    {% if query %}
        <!-- 0 Results -->
        {% if number_of_recipes_found == 0 %}
            <h2 class="sub-heading">No recipes found for "<span class="highlight">{{ query }}</span>"</h2>
            <p>Try searching for a dish, ingredient, or cuisine type.</p>
            <div class="margin-top-med">
                <a href="{{ url_for('all_recipes')}}" class="btn btn-primary" id="btn-back-to-all">View All Recipes</a>
            </div>
        <!-- 1 Result -->
        {% elif number_of_recipes_found == 1 %}
            <h2 class="sub-heading">One tasty match for "<span class="highlight">{{ query }}</span>"</h2>
        <!-- Multiple Results -->
        {% else %}
            <h2 class="sub-heading">{{ number_of_recipes_found }} delicious results for "<span class="highlight">{{ query }}</span>"</h2>
        {% endif %} 
    {% else %}
        <h2 class="sub-heading">Enter keywords to search for vegan recipes.</h2>
        <div class="margin-top-med">
            <a href="{{ url_for('all_recipes')}}" class="btn btn-primary" id="btn-back-to-all">Browse Recipes</a>
        </div>
    {% endif %}
</div>

<!-- Recipe Cards Container -->
<div class="container-recipes">
    <div class="row margin-top-med">
        {% for recipe in results %} 
            {% include "includes/recipecards.html" %} 
        {% endfor %}
    </div>

    <!-- Pagination -->
    <ul class="pagination center-align margin-bottom-large">
        {% for page_num in results_pages %} 
            {% if page_num == current_page %}
                <li class="active"><a>{{ page_num }}</a></li>
            {% else %}
                <li class="waves-effect">
                    <a href="{{ url_for('search', query=query, current_page=page_num) }}">{{ page_num }}</a>
                </li>
            {% endif %} 
        {% endfor %}
    </ul>
</div>

{% endblock %}
